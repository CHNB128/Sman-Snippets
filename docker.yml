attach:
  do: exec
  desc: attach without sig-proxy
  command: docker attach --sig-proxy=false <<container>>
rm:
  do: exec
  desc: stop and remove single or all containers
  command: docker stop <<container($(docker ps -a -q))>>; docker rm <<container>>
inspect:
  do: exec
  desc: inspect ip/ports
  command: >-
    docker inspect --format "{{ .Name }} # {{ .NetworkSettings.IPAddress }}
    # {{ .NetworkSettings.Ports }}" $(docker ps -q) | tr -s '#' '\t' | column -t
stop:
  do: exec
  desc: stop single or all containers
  command: docker stop <<container($(docker ps -a -q))>>;
bash:
  do: exec
  desc: run bash in container
  command: docker exec -it <<container>> bash
mysql:init:
  do: exec
  desc: Init mysql container
  command: >
    docker run
    -d
    --name <<name>>
    -e MYSQL_ROOT_PASSWORD=<<password>>
    <<custom_parametrs>>
    mysql
mysql:client:
  do: exec
  desc: Connect to mysql in container
  command: >
    docker run
    -it
    --link <<container>>:mysql
    --rm
    mysql
    sh -c '
      exec mysql
      -h <<host>>
      -P <<port>>
      -uroot -p <<password>>'
wordpress:init:
  do: exec
  desc: Init wordpress container
  command: >
    docker run
    -d
    -p <<port>>:80
    --name <<name>>
    --link <<mysql>>:mysql
    wordpress
top:
  do: exec
  desc: Top for containers
  command: >
    docker run
    --rm
    -ti
    --name ctop
    -v /var/run/docker.sock:/var/run/docker.sock
    quay.io/vektorlab/ctop
tor:
  do: exec
  desc: Init tor container
  command: >
    docker run
    -it
    --name proxy
    -p 8118:8118
    -p 9050:9050
    -d
    dperson/torproxy
steam:init:
  do: exec
  desc: Init Steam container
  command: >
    docker run
    -d
    --name steam
    -e DISPLAY=$DISPLAY
    -v /tmp/.X11-unix:/tmp/.X11-unix
    tianon/steam
kali:init:
  do: exec
  desc: Init Kali linux container
  command: >
    docker run
    -d
    -it
    --name kali-linux
    --privileged
    -e DISPLAY=$DISPLAY
    -v /tmp/.X11-unix:/tmp/.X11-unix
    -v <<folder($HOME)>>:/data
    -v /dev:/dev
    kalilinux/kali-linux-docker
postgres:init:
  do: exec
  desc: Init postgres container
  command: >
    docker run
    -d
    --name postgres-name
    -p <<port>>:5432
    -e POSTGRES_PASSWORD=<<password(postgres)>>
    -e POSTGRES_USER=<<user(postgres)>>
    -e POSTGRES_DB=<<dbname(postgres)>>
    postgres:alpine
postgres:client:
  do: exec
  desc: Connect to postgres container
  command: >
    docker run
    -it
    --rm
    postgres
    psql
    -h <<host(localhost)>>
    -U <<user(postgres)>>
postgis:init:
  do: exec
  desc: Create postgis container
  command: >
    docker run
    -d
    --name postgis
    -e POSTGRES_PASSWORD=<<password(postgres)>>
    mdillon/postgis
sudoless:
  do: exec
  desc: Grant non sudo access for user
  command: sudo groupadd docker; sudo gpasswd -a <<username>> docker
apache:host:
  do: exec
  desc: host directory on apache in docker
  command: >
    docker run
    -d
    --name <<docker_name>>
    -p <<port(8080)>>:80
    -v "<<directory>>":/var/www/app
    <<custom_parametrs>>
    romeoz/docker-apache-php
debian:add:package:
  do: exec
  desc: install package and cleanup on debian base docker
  command: >
    docker exec
    -it <<name>>
    bash -c '
    apt update &&
    apt install <<packages>> &&
    rm -rf /var/lib/apt/lists/*'
